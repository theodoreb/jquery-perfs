(function(b){function a(g,f,i){var e=f+"defer",d=f+"queue",c=f+"mark",h=b._data(g,e);if(h&&(i==="queue"||!b._data(g,d))&&(i==="mark"||!b._data(g,c))){setTimeout(function(){if(!b._data(g,d)&&!b._data(g,c)){b.removeData(g,e,true);h.fire()}},0)}}b.extend({_mark:function(d,c){if(d){c=(c||"fx")+"mark";b._data(d,c,(b._data(d,c)||0)+1)}},_unmark:function(g,f,d){if(g!==true){d=f;f=g;g=false}if(f){d=d||"fx";var c=d+"mark",e=g?0:((b._data(f,c)||1)-1);if(e){b._data(f,c,e)}else{b.removeData(f,c,true);a(f,d,"mark")}}},queue:function(d,c,f){var e;if(d){c=(c||"fx")+"queue";e=b._data(d,c);if(f){if(!e||b.isArray(f)){e=b._data(d,c,b.makeArray(f))}else{e.push(f)}}return e||[]}},dequeue:function(g,f){f=f||"fx";var d=b.queue(g,f),e=d.shift(),c={};if(e==="inprogress"){e=d.shift()}if(e){if(f==="fx"){d.unshift("inprogress")}b._data(g,f+".run",c);e.call(g,function(){b.dequeue(g,f)},c)}if(!d.length){b.removeData(g,f+"queue "+f+".run",true);a(g,f,"queue")}}});b.fn.extend({queue:function(c,d){var e=2;if(typeof c!=="string"){d=c;c="fx";e--}if(arguments.length<e){return b.queue(this[0],c)}return d===undefined?this:this.each(function(){var f=b.queue(this,c,d);if(c==="fx"&&f[0]!=="inprogress"){b.dequeue(this,c)}})},dequeue:function(c){return this.each(function(){b.dequeue(this,c)})},delay:function(d,c){d=b.fx?b.fx.speeds[d]||d:d;c=c||"fx";return this.queue(c,function(f,e){var g=setTimeout(f,d);e.stop=function(){clearTimeout(g)}})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(m,e){if(typeof m!=="string"){e=m;m=undefined}m=m||"fx";var c=b.Deferred(),d=this,g=d.length,k=1,h=m+"defer",j=m+"queue",l=m+"mark",f;function n(){if(!(--k)){c.resolveWith(d,[d])}}while(g--){if((f=b.data(d[g],h,undefined,true)||(b.data(d[g],j,undefined,true)||b.data(d[g],l,undefined,true))&&b.data(d[g],h,b.Callbacks("once memory"),true))){k++;f.add(n)}}n();return c.promise(e)}})})(jQuery);